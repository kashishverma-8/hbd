<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultimate Love Story</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Poppins',sans-serif;
  height:100vh;
  overflow:hidden;
  background:black;
  color:white;
}

/* INTRO */
.intro{
  position:fixed;
  width:100%;
  height:100%;
  background:black;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
  animation:introFade 3s forwards;
}

.intro h1{
  font-size:3rem;
  letter-spacing:5px;
  font-family:'Playfair Display',serif;
  animation:glowText 2s infinite alternate;
}

@keyframes glowText{
  from{text-shadow:0 0 20px #ff007f;}
  to{text-shadow:0 0 50px #ff007f;}
}

@keyframes introFade{
  0%{opacity:1;}
  80%{opacity:1;}
  100%{opacity:0;visibility:hidden;}
}

/* MAIN */
.container{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100vh;
}

.cinema-frame{
  width:90%;
  max-width:850px;
  height:80vh;
  position:relative;
  border-radius:25px;
  overflow:hidden;
  background:#000;
  transition:0.2s;
}

/* BLUR BG */
.bg-blur{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(35px) brightness(0.4);
  transform:scale(1.2);
  z-index:1;
}

/* MAIN IMAGE */
.main-img{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  max-height:95%;
  max-width:65%;
  object-fit:contain;
  border-radius:15px;
  z-index:2;
  box-shadow:0 25px 70px rgba(255,0,100,0.6);
}

/* LYRICS */
.lyrics{
  position:absolute;
  bottom:50px;
  width:100%;
  text-align:center;
  font-size:1.7rem;
  font-family:'Playfair Display',serif;
  z-index:3;
  padding:0 30px;
  text-shadow:0 0 20px rgba(255,255,255,0.9);
  transition:opacity 0.6s ease;
}

/* STOP BUTTON */
button{
  margin-top:20px;
  padding:10px 25px;
  border:none;
  border-radius:25px;
  cursor:pointer;
  background:#ff004f;
  color:white;
  font-weight:600;
}
button:hover{transform:scale(1.1);}

/* FALLING ROSES */
.rose{
  position:fixed;
  top:-50px;
  font-size:24px;
  animation:fall linear infinite;
}

@keyframes fall{
  0%{transform:translateY(-10vh) rotate(0deg);opacity:0;}
  10%{opacity:1;}
  100%{transform:translateY(110vh) rotate(360deg);opacity:0;}
}
</style>
</head>
<body>

<div class="intro">
  <h1>Our Ultimate Love Story</h1>
</div>

<div class="container">
  <div class="cinema-frame" id="frame">
    <img id="bg" class="bg-blur">
    <img id="main" class="main-img">
    <div id="lyrics" class="lyrics"></div>
  </div>

  <button onclick="stopMusic()">Stop Music</button>
</div>

<audio id="bgMusic">
  <source src="Gale Lag Ja De Dana Dan-(Mr-Jat.in).mp3" type="audio/mpeg">
</audio>

<script>

/* PLAY RANGE */
const startTime = 167;
const endTime   = 203;

let music=document.getElementById("bgMusic");
let frame=document.getElementById("frame");

/* AUTO START AFTER INTRO */
window.addEventListener("load",()=>{
  setTimeout(()=>{
    music.currentTime = startTime;
    music.play();
  },3000);
});

/* STOP FUNCTION */
function stopMusic(){
  music.pause();
}

/* AUTO STOP AT 3:23 */
music.addEventListener("timeupdate",()=>{
  if(music.currentTime >= endTime){
    music.pause();
  }
});

/* ===== BEAT REACTIVE GLOW ===== */
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const analyser = audioContext.createAnalyser();
const source = audioContext.createMediaElementSource(music);
source.connect(analyser);
analyser.connect(audioContext.destination);

analyser.fftSize = 256;
const dataArray = new Uint8Array(analyser.frequencyBinCount);

function animateBeat(){
  analyser.getByteFrequencyData(dataArray);
  let sum = dataArray.reduce((a,b)=>a+b);
  let intensity = sum / dataArray.length;

  frame.style.boxShadow = `0 0 ${intensity/2}px rgba(255,0,120,0.9)`;
  requestAnimationFrame(animateBeat);
}

music.addEventListener("play",()=>{
  audioContext.resume();
  animateBeat();
});

/* IMAGES */
let images=[
'img1.jpeg','img2.jpeg','img3.jpeg','img4.jpeg',
'img5.jpeg','img6.jpeg','img7.jpeg','img8.jpeg',
'img9.jpeg','img10.jpeg','img11.jpeg','img12.jpeg',
'img13.jpeg','img14.jpeg','img15.jpeg','img16.jpeg',
'img17.jpeg','img18.jpeg','img19.jpeg'
];

let bg=document.getElementById("bg");
let main=document.getElementById("main");
let currentIndex=0;

function showSlide(i){
  bg.src=images[i];
  main.src=images[i];
}
showSlide(currentIndex);

setInterval(()=>{
  currentIndex=(currentIndex+1)%images.length;
  showSlide(currentIndex);
},2000);

/* LYRICS */
let lyricsBox=document.getElementById("lyrics");

let lyricsData=[
{time:168, text:"Meri jazbon ki jo bhi halat hai"},
{time:172, text:"Woh samjh lo na bin kahe"},
{time:176, text:"In labon se kahon"},
{time:180, text:"Jo armaan hai barso yeh honth chup rahe"},
{time:186, text:"Thandi thandi agan hain"},
{time:190, text:"Meethi meethi chubhan hai"},
{time:195, text:"Judti judti hai tujhse aaaassss"},
{time:199, text:"Bheki bheki hai raatein"},
{time:201, text:"Mehki mehki hai saasnein"},
{time:203, text:"Rehna rehna tu dil ke paassss"}
];

music.addEventListener("timeupdate",()=>{
  let currentTime=Math.floor(music.currentTime);
  lyricsData.forEach(line=>{
    if(currentTime === line.time){
      lyricsBox.style.opacity=0;
      setTimeout(()=>{
        lyricsBox.innerText=line.text;
        lyricsBox.style.opacity=1;
      },300);
    }
  });
});

/* FALLING ROSES */
for(let i=0;i<30;i++){
  let rose=document.createElement("div");
  rose.className="rose";
  rose.innerHTML="ðŸŒ¹";
  rose.style.left=Math.random()*100+"vw";
  rose.style.animationDuration=(6+Math.random()*6)+"s";
  document.body.appendChild(rose);
}

</script>
</body>
</html>
